TEST CASE LIST - GREY BOX TESTING,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,
Project Name,FastFoodOnline,,,,,,,,,,,,,,,,,,,,,,,
Project Code,FFO,,,,,,,,,,,,,,,,,,,,,,,
Test Environment Setup Description,"1. Server
Requires Node.js 20 LTS and npm.
Supports running backend, frontend, and admin via:
npm run dev (all services)
npm run server --prefix backend (backend only)
2. Database
Uses MongoDB (Atlas or local).
Must configure MONGO_URL in backend/.env.
3. API Testing Tools
Postman, Thunder Client, or similar tools for API testing.
4. Database Tools
MongoDB Compass or Studio 3T for database inspection.",,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,
Module Code,Grey Box Testing,,,,,,,,Pass,,,,,,,,,,,,,,,,,
Test requirement,"This sheet contains test cases for Grey Box Testing, which tests with partial knowledge of internal structure, database, and API endpoints. Tests cover Authentication, Database Operations, Cart, Order, Payment Integration, Authorization, File Upload, Notification, and Drone Delivery.",,,,,,,,Fail,,,,,,,,,,,,,,,,,
Tester,Test Team,,,,,,,,,,,,,,,,,,,,,,,
Pass,Fail,Untested,N/A,Number of Test cases,,,,,Untested,,,,,,,,,,,,,,,,,
0,0,0,0,30,,,,,N/A,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,
ID,Test Case Description,Test Case Procedure,Expected Output,Test data,Result,Description,Pre-Condition,Priority,Module,Test Type,,,,,,,,,,,,,
FUNCTION AUTHENTICATION,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-AUTH-001,Kiểm tra JWT token expiry,"1. Đăng nhập và lấy token
2. Kiểm tra payload của token (decode JWT)
3. Đợi token hết hạn (hoặc tạo token với expiry ngắn)
4. Gọi API với token đã hết hạn","- API trả về 401 Unauthorized
- Token không còn hợp lệ
- Phải đăng nhập lại",,,"Đã đăng nhập, có JWT token",High,Authentication,Grey Box,,,,,,,,,,,,,
TC-GB-AUTH-002,Password hashing với bcrypt,"1. Tạo user với password ""Test123""
2. Query database: db.users.findOne({email: ""test@example.com""})
3. Kiểm tra field password","- Password không được lưu plain text
- Format: $2b$10$... (bcrypt hash)
- Password được hash đúng cách","Password: Test123",,Không có,High,Authentication,Grey Box,,,,,,,,,,,,,
TC-GB-AUTH-003,Session persistence,"1. Đăng nhập
2. Kiểm tra localStorage: localStorage.getItem('token')
3. Refresh page","- Token vẫn tồn tại
- User vẫn đăng nhập
- Session được duy trì",,,"Đã đăng nhập",Medium,Authentication,Grey Box,,,,,,,,,,,,,
FUNCTION DATABASE OPERATIONS,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-DB-001,Kiểm tra unique constraint cho email,"1. Tạo user với email ""test@example.com""
2. Cố tạo user khác với cùng email
3. Kiểm tra MongoDB error","- MongoDB throw duplicate key error (E11000)
- API trả về ""User already exists""
- Không tạo user trùng email","Email: test@example.com",,Không có,High,Database,Grey Box,,,,,,,,,,,,,
TC-GB-DB-002,Cascade delete,"1. Tạo user và đơn hàng
2. Xóa user
3. Query orders của user đó","- Orders vẫn tồn tại (không cascade)
- Hoặc được đánh dấu xóa (soft delete)
- Data integrity được duy trì",,,"Có user và orders trong database",Medium,Database,Grey Box,,,,,,,,,,,,,
TC-GB-DB-003,Index performance,"1. Insert 10,000 orders
2. Query: db.orders.find({userId: ""xxx""}).explain(""executionStats"")
3. Kiểm tra có sử dụng index không","- Index được sử dụng
- executionTimeMillis < 100ms
- Query performance tốt",,,"Có 10,000 orders trong database",Medium,Database,Grey Box,,,,,,,,,,,,,
TC-GB-DB-004,Kiểm tra GeoJSON location indexing,"1. Insert order với customerLocation (GeoJSON Point)
2. Query: db.orders.find({ customerLocation: { $near: {...} } })","- 2dsphere index được sử dụng
- Query location-based hoạt động hiệu quả
- Kết quả được trả về đúng",,,"Có orders với GeoJSON location",Medium,Database,Grey Box,,,,,,,,,,,,,
FUNCTION CART,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-CART-001,Cart data structure trong MongoDB,"1. Thêm món vào giỏ
2. Query: db.users.findOne({_id: userId})
3. Kiểm tra field cartData","- cartData có format: {foodId: quantity, ...}
- minimize: false để lưu empty object
- Data structure đúng",,,"Đã đăng nhập, có món trong giỏ",Medium,Cart,Grey Box,,,,,,,,,,,,,
TC-GB-CART-002,Cart sync giữa client và server,"1. Thêm món từ client
2. Kiểm tra API call: POST /api/cart/add
3. Verify database được update","- Client state = Server state = DB state
- Data được sync chính xác
- Không có inconsistency",,,"Đã đăng nhập",High,Cart,Grey Box,,,,,,,,,,,,,
FUNCTION ORDER,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-ORDER-001,Order schema validation,"1. Tạo order với invalid data (thiếu required fields)
2. Kiểm tra Mongoose validation error","- Mongoose throw ValidationError
- Các fields required được kiểm tra: userId, branchId, items, totalAmount
- Error message rõ ràng",,,"Đã đăng nhập",High,Order,Grey Box,,,,,,,,,,,,,
TC-GB-ORDER-002,Timeline tracking,"1. Tạo order
2. Update status nhiều lần
3. Query order và kiểm tra timeline array","- Mỗi thay đổi status được log vào timeline
- Timeline có: status, actorType, at, actor
- Timeline được lưu đúng format",,,"Đã đăng nhập, có order",Medium,Order,Grey Box,,,,,,,,,,,,,
TC-GB-ORDER-003,Transaction rollback khi thanh toán fail,"1. Tạo order
2. Simulate payment failure
3. Kiểm tra order status và payment status","- Order vẫn tồn tại với paymentStatus = ""FAILED""
- Không bị xóa
- Data integrity được duy trì",,,"Đã đăng nhập, có order",High,Order,Grey Box,,,,,,,,,,,,,
TC-GB-ORDER-004,Concurrent order creation,"1. Tạo 2 orders cùng lúc từ cùng 1 user
2. Kiểm tra database","- Cả 2 orders đều được tạo thành công
- Không có race condition
- Data consistency được đảm bảo",,,"Đã đăng nhập",Medium,Order,Grey Box,,,,,,,,,,,,,
FUNCTION PAYMENT INTEGRATION,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-PAY-001,VNPAY signature verification,"1. Tạo payment với VNPAY
2. Kiểm tra request có secure hash (vnp_SecureHash)
3. Verify callback từ VNPAY","- Signature được tính đúng với secret key
- Callback được verify trước khi accept
- Security được đảm bảo",,,"Đã đăng nhập, có order với VNPAY",High,Payment,Grey Box,,,,,,,,,,,,,
TC-GB-PAY-002,Stripe webhook verification,"1. Tạo payment với Stripe
2. Test Stripe webhook signature
3. Verify webhook","- Webhook signature được verify
- Security được đảm bảo
- Payment được xử lý đúng",,,"Đã đăng nhập, có order với Stripe",High,Payment,Grey Box,,,,,,,,,,,,,
TC-GB-PAY-003,MoMo signature verification,"1. Tạo payment với MoMo
2. Kiểm tra signature
3. Verify callback","- Signature được verify đúng
- Callback được xử lý an toàn
- Payment được cập nhật đúng",,,"Đã đăng nhập, có order với MoMo",High,Payment,Grey Box,,,,,,,,,,,,,
FUNCTION AUTHORIZATION,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-AUTH-004,Role-based access control,"1. Đăng nhập với role ""user""
2. Gọi API admin: POST /api/v2/menu/foods
3. Kiểm tra middleware auth.js","- 403 Forbidden
- Unauthorized access bị chặn
- Security được đảm bảo","Role: user",,"Đăng nhập với role user",High,Authorization,Grey Box,,,,,,,,,,,,,
TC-GB-AUTH-005,Token trong header,"1. Gọi protected API với header: Authorization: Bearer <token>
2. Kiểm tra authMiddleware decode token","- Request được accept nếu token hợp lệ
- req.userId được set đúng
- Middleware hoạt động chính xác",,,"Có JWT token hợp lệ",High,Authorization,Grey Box,,,,,,,,,,,,,
FUNCTION FILE UPLOAD,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-UPLOAD-001,Cloudinary upload,"1. Upload image qua API
2. Kiểm tra response có publicUrl
3. Verify image tồn tại trên Cloudinary","- Image được upload vào folder: fastfoodonline/menu
- URL format: https://res.cloudinary.com/...
- Image accessible từ URL",,,"Đăng nhập với role admin, có file image",Medium,File Upload,Grey Box,,,,,,,,,,,,,
TC-GB-UPLOAD-002,Multer validation,"1. Upload file không phải image (PDF, TXT)
2. Kiểm tra response","- Reject với error ""Only images allowed""
- File không được upload
- Validation hoạt động đúng","File: document.pdf",,"Đăng nhập với role admin, có file không phải image",Medium,File Upload,Grey Box,,,,,,,,,,,,,
FUNCTION NOTIFICATION,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-NOTIF-001,Notification được tạo khi order thay đổi,"1. Tạo order
2. Query: db.notifications.find({entityType: ""order"", entityId: orderId})","- Notification được tạo với targetRoles: [""admin""]
- Notification có đầy đủ thông tin
- Notification được lưu đúng format",,,"Đã đăng nhập, có order",Medium,Notification,Grey Box,,,,,,,,,,,,,
TC-GB-NOTIF-002,Real-time notification (nếu có WebSocket),"1. Tạo order
2. Kiểm tra WebSocket connection nhận được notification","- Client nhận được event ngay lập tức
- Notification được push real-time
- WebSocket hoạt động đúng",,,"Đã đăng nhập, có WebSocket connection",Low,Notification,Grey Box,,,,,,,,,,,,,
FUNCTION DRONE DELIVERY,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-DRONE-001,Drone assignment,"1. Tạo order
2. Kiểm tra order có needsDroneAssignment = true
3. Chạy job assign drone
4. Verify order có droneId và missionId","- Drone được gán cho order
- Order có droneId và missionId
- Mission được tạo",,,"Có order, có drone available",Medium,Drone Delivery,Grey Box,,,,,,,,,,,,,
TC-GB-DRONE-002,Mission tracking,"1. Query: db.missions.findOne({orderId: orderId})
2. Kiểm tra mission status","- Mission có status: ASSIGNED, PICKING_UP, DELIVERING, COMPLETED
- Mission được track đúng
- Status transitions hợp lệ",,,"Có order với mission",Medium,Drone Delivery,Grey Box,,,,,,,,,,,,,
FUNCTION API ERROR HANDLING,,,,,,,,,,,,,,,,,,,,,,,,,
TC-GB-API-001,404 Not Found,"1. Gọi API: GET /api/v2/orders/invalidObjectId
2. Kiểm tra response","- 404 với message ""Order not found""
- Error message rõ ràng
- Status code đúng","OrderId: invalidObjectId",,Không có,Medium,API Error Handling,Grey Box,,,,,,,,,,,,,
TC-GB-API-002,500 Internal Server Error,"1. Simulate database connection error
2. Gọi API
3. Kiểm tra response","- 500 với generic error message
- Error được handle đúng
- Không expose sensitive information",,,"Database connection error",Medium,API Error Handling,Grey Box,,,,,,,,,,,,,
TC-GB-API-003,400 Bad Request,"1. POST order với invalid JSON
2. Kiểm tra response","- 400 validation error
- Error message rõ ràng
- Validation hoạt động đúng","Invalid JSON payload",,Không có,Medium,API Error Handling,Grey Box,,,,,,,,,,,,,

